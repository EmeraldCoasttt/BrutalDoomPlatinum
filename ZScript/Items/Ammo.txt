class BDPBackpack : BackpackItem replaces Backpack
{
	Default
	{
		Height 26;
		Inventory.PickupMessage "$GOTBACKPACK";
		Inventory.PickupSound "BACKPACK";
	}
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_Jump(64, "SpawnOriginal");
		TNT1 A 0 A_Jump(256, "Spawn1", "Spawn2", "Spawn3");
		Loop;
	SpawnOriginal:
		BPAK A -1;
	Spawn1:
		BPAK BCDE 4;
		LOOP;
	Spawn2:
		BPAK CDEB 4;
		LOOP;
	Spawn3:
		BPAK DEBC 4;
		LOOP;
	}
	override bool TryPickup (in out Actor toucher)
	{
		if(super.trypickup(Toucher))
		{
			toucher.Score += 500;
			return true;
		}
		else
		{
			return false;
		}
	}
}

class BDPAmmo : Ammo
{
	int score;
	property Score : score;

	
	
	override bool TryPickup (in out Actor toucher)
	{
		
		if(super.trypickup(Toucher))
		{
			toucher.Score += score;
			return true;
		}
		else
		{
			return false;
		}
	}
	
	override Class<Ammo> GetParentAmmo ()
	{
		class<Object> type = GetClass();
		
		while (type.GetParentClass() != "BDPAmmo" && type.GetParentClass() != null)
		{
			type = type.GetParentClass();
		}
		return (class<Ammo>)(type);
	}
	
	Default
	{
		BDPAmmo.Score 50;
	}
}

class BDPMultiAmmo : Inventory
{
	string ammotype1;
	property ammotype1 : ammotype1;
	string ammotype2;
	property ammotype2 : ammotype2;
	int ammoamount1;
	property ammoamount1 : ammoamount1;
	int ammoamount2;
	property ammoamount2 : ammoamount2;
	
	override bool TryPickup(in out Actor toucher)
	{
	  bool success;
	  Ammo a1 = Ammo(Actor.Spawn(ammotype1, pos));
	  Ammo a2 = Ammo(Actor.Spawn(ammotype2, pos));
	  if (a1)
	  {
		a1.amount = ammoamount1;
		if (a1.CallTryPickup(toucher))
		  success = true;
		else
		  a1.Destroy();
	  }
	  if (a2)
	  {
		a2.amount = ammoamount2;
		if (a2.CallTryPickup(toucher))
		  success = true;
		else
		  a2.Destroy();
	  }
	  if (success) GoAwayAndDie();
		return success;
	  
	}

}


class BDPSmallBulletBox : BDPMultiAmmo replaces Clip
{
	Default
	{
		BDPMultiAmmo.ammotype1 "BDPClip1";
		BDPMultiAmmo.ammotype2 "BDPClip2";
		BDPMultiAmmo.ammoamount1 15;
		BDPMultiAmmo.ammoamount2 30;
		Inventory.PickupMessage "Picked up a small box of bullets.";
		Inventory.PickupSound "CLIPICK2";
	}
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_Jump(256, "Spawn1", "Spawn2", "Spawn3", "Spawn4", "Spawn5", "Spawn6", "Spawn7", "Spawn8");
	Spawn1:
		CLP1 A -1;
		stop;
	Spawn2:
		CLP1 B -1;
		stop;
	Spawn3:
		CLP1 C -1;
		stop;
	Spawn4:
		CLP1 D -1;
		stop;
	Spawn5:
		CLP1 E -1;
		stop;
	Spawn6:
		CLP1 F -1;
		stop;
	Spawn7:
		CLP1 G -1;
		stop;
	Spawn8:
		CLP1 H -1;
		stop;
	}
}

class BDPLargeBulletBox : BDPSmallBulletBox replaces ClipBox
{
	Default
	{
		BDPMultiAmmo.ammoamount1 40;
		BDPMultiAmmo.ammoamount2 80;
		Inventory.PickupMessage "Picked up a large box of bullets.";
		Inventory.PickupSound "CBOXPICK";
		
	}
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_Jump(255, "Spawn1","Spawn2","Spawn3", "Spawn4", "Spawn5");
	Spawn1:
 		AMM2 A 0 A_Jump(240,2);
 		AMM2 N 0;
 		AMM2 "#" -1;
		Stop;
	Spawn2:
 		AMM2 B 0 A_Jump(240,2);
 		AMM2 O 0;
 		AMM2 "#" -1;
		Stop;
	Spawn3:
 		AMM2 C 0 A_Jump(240,2);
 		AMM2 P 0;
 		AMM2 "#" -1;
		Stop;
	Spawn4:
 		AMM2 D -1;
		Stop;
	Spawn5:
 		AMM2 E -1;
		Stop;
	Spawn6:
 		AMM2 F -1;
		Stop;
	}
}


class BDPClip1 : BDPAmmo
{
	Default
	{
		Inventory.PickupMessage "Picked up pistol ammo.";
		Inventory.Amount 15;
		Inventory.MaxAmount 200;
		Ammo.BackpackAmount 15;
		Ammo.BackpackMaxAmount 400;
		Inventory.Icon "CLP1H0";
		Inventory.PickupSound "CLIPICK";
	}
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_Jump(256, "Spawn1", "Spawn2", "Spawn3", "Spawn4", "Spawn5", "Spawn6", "Spawn7");
	Spawn1:
		CLP1 A -1;
		stop;
	Spawn2:
		CLP1 B -1;
		stop;
	Spawn3:
		CLP1 C -1;
		stop;
	Spawn4:
		CLP1 D -1;
		stop;
	Spawn5:
		CLP1 E -1;
		stop;
	Spawn6:
		CLP1 F -1;
		stop;
	Spawn7:
		CLP1 G -1;
		stop;
	}
	
	
}


class BDPClip2 : BDPAmmo
{
	
	Default
	{
		Inventory.PickupMessage "Picked up rifle ammo.";
		Inventory.Amount 30;
		Inventory.MaxAmount 300;
		Ammo.BackpackAmount 30;
		Ammo.BackpackMaxAmount 600;
		Inventory.Icon "AMM2A0";
		Inventory.PickupSound "CLIPICK2";
	}
	
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_Jump(256, "Spawn1", "Spawn2", "Spawn3", "Spawn4", "Spawn5", "Spawn6", "Spawn7", "Spawn8");
	Spawn1:
		CLP1 A -1;
		stop;
	Spawn2:
		CLP1 B -1;
		stop;
	Spawn3:
		CLP1 C -1;
		stop;
	Spawn4:
		CLP1 D -1;
		stop;
	Spawn5:
		CLP1 E -1;
		stop;
	Spawn6:
		CLP1 F -1;
		stop;
	Spawn7:
		CLP1 G -1;
		stop;
	Spawn8:
		CLP1 H -1;
		stop;
	}
	
}



class BDPShell : BDPAmmo replaces Shell
{
	Default
	{
		Inventory.PickupMessage "$GOTSHELLS";
		Inventory.Amount 4;
		Inventory.MaxAmount 50;
		Ammo.BackpackAmount 4;
		Ammo.BackpackMaxAmount 100;
		Inventory.Icon "SHELA0";
		Inventory.Pickupsound "SHELPK1";
	}
	States
	{
	Spawn:
		TNT1 A 0 NoDelay{if(random(0,1) == 0) bXFlip = true;}
		TNT1 A 0 A_Jump(256,"Spawn1","Spawn2","Spawn3","Spawn4","Spawn5","Spawn6","Spawn7","Spawn8","Spawn9");
	Spawn1:
		SHEL B -1;
		Stop;
	Spawn2:
		SHEL C -1;
		Stop;
	Spawn3:
		SHEL D -1;
		Stop;
	Spawn4:
		SHEL E -1;
		Stop;
	Spawn5:
		SHEL F -1;
		Stop;
	Spawn6:
		SHEL G -1;
		Stop;
	Spawn7:
		SHEL H -1;
		Stop;
	Spawn8:
		SHEL I -1;
		Stop;
	Spawn9:
		SHEL J -1;
		Stop;
	}
}

class BDPShellBox : BDPShell replaces ShellBox
{
	Default
	{
		Inventory.PickupMessage "$GOTSHELLBOX";
		Inventory.Amount 14;
		Inventory.Pickupsound "SHELPK2";
	}
	States
	{
	Spawn:
		TNT1 A 0 NoDelay;
		TNT1 A 0 A_Jump(256,"Spawn1","Spawn2","Spawn3","Spawn4","Spawn5","Spawn6","Spawn7","Spawn8","Spawn9");
	Spawn1:
		SBOX A -1;
		Stop;
	Spawn2:
		SBOX B -1;
		Stop;
	Spawn3:
		SBOX C -1;
		Stop;
	Spawn4:
		SBOX D -1;
		Stop;
	Spawn5:
		SBOX E -1;
		Stop;
	Spawn6:
		SBOX E -1;
		Stop;
	Spawn7:
		SBOX E -1;
		Stop;
	Spawn8:
		SBOX E -1;
		Stop;
	Spawn9:
		SBOX E -1;
		Stop;
	}
}

class BDPRocketAmmo : Ammo replaces RocketAmmo
{
	Default
	{
	Inventory.PickupMessage "$GOTROCKET";
	Inventory.Amount 1;
	Inventory.MaxAmount 50;
	Ammo.BackpackAmount 1;
	Ammo.BackpackMaxAmount 100;
	Inventory.Icon "ROCKA0";
	Inventory.Pickupsound "RCKCLIP";
	+SQUAREPIXELS
	}
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_Jump(256, "Spawn1", "Spawn2", "Spawn3");
	Spawn1:
		ROCK A -1 {self.Scale.Y =1.2;}
		Stop;
	Spawn2:
		ROCK B -1 {self.Scale.X =1.2;}
		Stop;
	Spawn3:
		ROCK C -1 {self.Scale.X =1.2;}
		Stop;
	}
}

class BDPRocketBox : BDPRocketAmmo replaces RocketBox
{
	Default
	{
	Inventory.PickupMessage "$GOTROCKBOX";
	Inventory.Amount 3;
	Inventory.Pickupsound "RCKCLIP2";
	-SQUAREPIXELS
	}
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_Jump(256, "Spawn1", "Spawn2", "Spawn3", "Spawn4", "Spawn5", "Spawn6");
	Spawn1:
		BROK A -1;
		Stop;
	Spawn2:
		RBOK B -1;
		Stop;
	Spawn3:
		RBOK C -1;
		Stop;
	Spawn4:
		RBOK D -1;
		Stop;
	Spawn5:
		RBOK E -1;
		Stop;
	Spawn6:
		RBOK F -1;
		Stop;
	}
}

class BDPCell : BDPAmmo replaces Cell
{
	Default
	{
		Inventory.PickupMessage "$GOTCELL";
		Inventory.Amount 20;
		Inventory.MaxAmount 300;
		Ammo.BackpackAmount 20;
		Ammo.BackpackMaxAmount 600;
		Inventory.Pickupsound "PLAPICK1";
		Inventory.Icon "CELLA0";
		BDPAmmo.Score 100;
	}
	States
	{
	Spawn:
		TNT1 A 0 NoDelay A_Jump(64, "SpawnOriginal");
		TNT1 A 0 A_Jump(256, "Spawn1", "Spawn2", "Spawn3");
	Spawn1:
		CELL BCDEF 3;
		loop;
	Spawn2:
		CELL EFBCD 3;
		loop;
	Spawn3:
		CELL DEFBC 3;
		loop;
	SpawnOriginal:
		CELL A -1;
		Stop;
	}
}

class BDPCellPack : BDPCell replaces CellPack
{
	Default
	{
		Inventory.PickupMessage "$GOTCELLBOX";
		Inventory.Pickupsound "PLAPICK2";
		Inventory.Amount 100;
		BDPAmmo.Score 150;
	}
	States
	{
	Spawn:
		TNT1 A 0 NoDelay{if(random(0,1) == 0) bXFlip = true;}
		TNT1 A 0 A_Jump(64, "SpawnOriginal");
		TNT1 A 0 A_Jump(256, "Spawn1", "Spawn2", "Spawn3");
	Spawn1:
		CELP ABCDEFGH 2;
		Loop;
	Spawn2:
		CELP CDEFGHAB 2;
		Loop;
	Spawn3:
		CELP FGHABCDE 2;
		Loop;
	SpawnOriginal:
		CELP A -1;
		Stop;
	}
}