ACTOR FiringTiltCounter: Inventory { Inventory.MaxAmount 3 }
ACTOR Rifle : BrutalWeapon
{
	Weapon.AmmoUse1 0
	Weapon.AmmoGive1 0
	Weapon.AmmoUse2 0
	Weapon.AmmoGive2 0
	YScale 0.6
	XScale 0.8
	//Weapon.SelectionOrder 2500
	Weapon.AmmoType1 "Clip2"
	Weapon.AmmoType2 "RifleAmmo"
	BrutalWeapon.Weight 5
	Obituary "%o was shot down by %k's assault rifle."
    AttackSound "None"
    Inventory.PickupSound "CLIPIN"
	Inventory.Pickupmessage "You got the Assault Rifle! (Slot 4)"
    +WEAPON.NOAUTOAIM
    +WEAPON.NOALERT
	+WEAPON.NOAUTOFIRE
	+FORCEXYBILLBOARD
	Tag "Assault Rifle"
    Scale 0.8
	Inventory.AltHUDIcon "RIFLA0"
	States
	{
	
	SprintOverlay:
	RIFL RSTU 1
	RIFL V 1
	Wait
	
	Returnfromsprint:
	RIFL UTSR 1
	Goto ready
	
	GrenadeThrowFlash:
	RIFS ABCD 1
	TNT1 A 24
	RIFS DCBA 1//32 in total
	stop
	
	Fidget:
	RIFL C 0 A_TakeInventory("Reloading", 1)
	RIFL C 0 A_JumpIfInventory("Zoomed",1,"NoAim")
	XXXX X 0 A_PlaySound("foley/RifleInspectMisc",10)
	RIFL HIJK 1 A_WeaponReady
	RIFL L 4 A_WeaponReady
	RIFL C 0 A_PlaySound("RIFPULL", 0, 0.6)
	RIFL MNOOPPP 1 A_WeaponReady
	RIFL OONMLL 1 A_WeaponReady
	RIFL JIH 1 A_WeaponReady
	TNT1 A 0 A_Takeinventory("Reloading",1)
	RIFL C 0 A_JumpIfInventory("FiredSecondary",1,"AltFire")
	Goto Ready
	
	KickingFlash:
	RIFL RSTUVVVVVVVVUTSR 1
	Goto Ready
	
	AirKickingFlash:
	    RIFL RSTUVVVVVVVVVVUTSR 1 //18
		Goto Ready
	
	 SlideKickingStart:
	    RIFL RSTUV 1
	    //RIFK EE 17 { //39 total
	    RIFL VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV 1 { //39 total
			if (CountInv("Kicking") == 0) {
				return state("SlideKickingEnd");
			}
			return state("");
		}
		Goto Ready

	 SlideKickingEnd:
	    RIFL VVVVVVUTSR 1 //10
		Goto Ready
		
	FuckYouFlash:
	RIFL RSTUVVVVVVVVVVVVVVVVVVVVVVUTSR 1//30 total
	stop
		
	TacticalWarning:
		TNT1 A 4
		Goto LetsGetStarted
	WarmUp:
		RIFL C 0
		RIFL C 0 A_TakeInventory("NeverSelectedShotgun", 1)
				
	LetsGetStarted:
		 TNT1 A 0 A_TakeInventory("NeverSelectedShotgun",1)
	    PONG A 20 A_WeaponReady
	    PUNS BD 1  A_WeaponReady
		PUNS EFF 1 A_WeaponReady
		PUNS A 0 A_PlaySound("Knuckled")
		PUNS GG 1 A_WeaponReady
		PUNS G 1 offset(0,31)
		PUNS G 1 offset(0,32)
		PUNS G 1 offset(0,31)
		PUNS GG 1 offset(0,32)
		PUNS FFE 3 A_WeaponReady
		PUNS KLL 1 A_WeaponReady
		PUNS A 0 A_PlaySound("Knuckled")
		PUNS MM 1 A_WeaponReady
		PUNS M 1 offset(0,31)
		PUNS M 1 offset(0,32)
		PUNS M 1 offset(0,31)
		PUNS MM 1 offset(0,32)
		PUNS LLK 3 
		PUNS DB 1 A_TakeInventory("Reloading", 1)
		PONG A 1 A_WeaponReady
		FISA C 1 A_WeaponReady
		TNT1 A 3 A_WeaponReady
		RIR3 ABCDEFG 1
		RIFR HIJKLMNOPQR 1
		RIFL C 0 A_PlaySound("RELO2")
		RIFR STUVWXYZ 1
		RIFR "[\]" 1
		RIR2 AB 1
		Goto Ready3
	
		

	
	
	SelectAnimation:
	ReturnFromNothing:
        TNT1 AA 0 A_JumpIfInventory("GoFatality", 1, "Steady")
		RIFL C 0 A_JumpIfInventory("NeverSelectedShotgun",1,"WarmUp")
        RIFL C 0 A_PlaySound("CLIPIN")
		RIFL C 0 A_Takeinventory("BDWeaponACtion",1)
		RIFS DCBA 1 A_WeaponReady(WRF_NOFIRE)
		RIFL C 0 A_Takeinventory("StartDualWield",1)
        TNT1 A 0 A_TakeInventory("RememberDualRifle", 1)
		Goto Ready3
	
	Ready:
	Ready3:
	//	RIFL C 0 A_JumpIfInventory("Zoomed",1,"Ready2")
		RIFL C 1 A_WeaponReadyDX(WRF_ALLOWRELOAD,TRUE)
		Loop	
		
    Ready2:
		RIFL C 0 A_JumpIfInventory("TossGrenade",1,"TossGrenade")
        RIFL C 0 A_JumpIfInventory("Taunting",1,"Taunt")
        RIFL C 0 A_JumpIfInventory("Reloading",1,"Reload")
		RIFL C 0 A_JumpIfInventory("Unloading",1,"Unload")
		RIFL C 0 A_JumpIfInventory("Salute1", 1, "Salute")
		RIFL C 0 A_JumpIfInventory("Salute2", 1, "Salute")
		RIFL C 0 {
			if (CountInv("Kicking") == 1) {
				if (CountInv("IsCrouching") == 1) {
					return state("SlideKickingStart");
				}
				if (momZ != 0) {
					return state("AirKickingFlash");
				}
				else {
					return state("KickingFlash");
				}
			}
			return state("");
		}
		RIFL C 0 A_JumpIfInventory("Unloading",1,"Unload")
		RIFL C 0 A_JumpIfInventory("StartDualWield",1,"DualWield")
		RIFL C 0 A_JumpIfInventory("FiredPrimary",1,"Fire")
		RIFZ D 1 A_WeaponReady(WRF_ALLOWRELOAD)
		TNT1 A 0 A_SetCrosshair(41)
		RIFL C 0 A_JumpIfInventory("IsRunning",1,"CheckSprint2")
		//RIFL C 0 A_TakeInventory("UsedStamina", 2)
		Loop
	
		
	Deselect: "####" A 0 A_TakeInventory("IsPlayingDoxMod",1)
		RIFL C 0 {if(GetCVAR("bd_SmartCrosshairs") == 1){A_SetCrosshair(GetCVAR("RifleCrosshair"));}else{A_SetCrosshair(0);}}
		RIFL C 0 A_Takeinventory("Zoomed",1)
		RIFL C 0 A_Takeinventory("ADSmode",1)
		RIFL C 0 A_TakeInventory("TossGrenade", 1)
		RIFL C 0 A_TakeInventory("Kicking",1)
        RIFL C 0 A_TakeInventory("Taunting",1)
        RIFL C 0 A_TakeInventory("Reloading",1)
		RIFL C 0 A_TakeInventory("Unloading",1)
		RIFL C 0 A_TakeInventory("Salute1", 1)
		RIFL C 0 A_TakeInventory("Salute2", 1)
		RIFL C 0 A_TakeInventory("Fire2Activate",1)
		RIFL C 0 A_Takeinventory("PressedTwice",1)
		RIFL C 0 A_TakeInventory("PressedOnce",1)
		RIFL C 0 A_Takeinventory("RifleSelected",1)
        RIFL C 0 A_ZoomFactor(1.0)
		TNT1 A 0 A_JumpIfInventory("SwitchingDualModes", 1, "DeselectForDual")
		TNT1 A 0 A_JumpIfInventory("NoSmartDualWield",1,2)//Checks if the Smart Dual Wielding option is disabled.
		TNT1 A 0 A_JumpIfInventory("RememberDualRifle",1,"DeselectForDual")
		TNT1 A 0 A_ClearOverlays(-2,-2)
		RIFS ABCD 1
		TNT1 AAAAAAAAAAAAAAAAAAAAAA 0 A_Lower
		TNT1 A 1 A_Lower
		Wait
		
	DeselectForDual:
	TNT1 AAAAAAAA 0 A_Lower
	Wait	
		
		HasRememberedDual:
	    TNT1 A 0
		TNT1 A 0 A_SelectWeapon("DualRifles")
		Goto Ready
		
		
	Select:
		TNT1 A 0
		RIFL C 0 {if(GetCVAR("bd_SmartCrosshairs") == 1){A_SetCrosshair(GetCVAR("RifleCrosshair"));}else{A_SetCrosshair(0);}}
		Goto SelectFirstPersonLegs
		SelectContinue:
		"####" A 0 A_GiveInventory("IsPlayingDoxMod",1)
	   
		RIFL C 0 A_Giveinventory("GoSpecial",1)
		"####" A 0 A_TakeInventory("swapRifleSpecial",1)
	
		TNT1 A 0 A_JumpIfInventory("SwitchingDualModes", 1, "SelectFromDual")
		TNT1 A 0 A_JumpIfInventory("NoSmartDualWield",1,2)//Checks if the Smart Dual Wielding option is disabled.
		TNT1 A 0 A_JumpIfInventory("RememberDualRifle",1,"HasRememberedDual")
		TNT1 A 1 A_Raise
		RIFL C 0 A_Giveinventory("RifleSelected",1)
		TNT1 AAAAAAAAAAAAAA 0 A_Raise
		Goto SelectAnimation
		
	SelectFromDual:
		TNT1 AAAAAAAAAAAAAAA 0 A_Raise
		//TNT1 AA 1 A_JumpIfInventory("GoFatality", 1, "Steady")
        //RIFL C 0 A_PlaySound("CLIPIN")
		RIFL C 0 A_Takeinventory("BDWeaponACtion",1)
		XXXX X 0 A_PlaySound("foley/RifleInspectMisc",10)
		DURI "]\[" 1
		DURI ZYXWVUT 1
		RIFL C 0 A_Takeinventory("StartDualWield",1)
		TNT1 A 0 A_TakeInventory("SwitchingDualModes",1)
        TNT1 AAAA 0
		Goto Ready3
		
	
    Fire:
        RIFL C 0 A_CheckIfAmmo("RifleAmmo")
        TNT1 AA 0
		RIFL C 0 A_AlertMonsters
		RIFF A 0 A_FireCustomMissile("DistantFireSoundRifle", random(-1,1), 0, 0, -12, 0, random(-1,1))
		RIFL C 0 A_TakeAmmo("DoubleRifleAmmo",1)
		RIFL C 0 A_TakeAmmo("RifleAmmo",1)
        RIFL C 0 A_PlaySound("weapons/rifle", 1)
		"----" A 0 { If(GetCVAR("BD_MagGoClicky")==1) { if(CountInv("RifleAmmo")<=8) { A_PlaySound("MagClick", 7); }}}
		//RIFL C 0 A_JumpIfInventory("Zoomed",1,"Fire2")
		//RIFF A 0 A_FireCustomMissile("DecorativeTracer", random(-1,1), 0, 0, -12, 0, random(-1,1))
		TNT1 A 0 BRIGHT A_FireCustomMissile("ShotgunParticles2", random(-8,8), 0, 0, -4, 0, random(-9,9))
		RIFL J 0 A_Jump(128,3)
		RIFL I 0 A_Jump(128,2)
		RIFL A 0
		RIFL "#" 0
		RIFL D 1 BRIGHT A_FireBullets (0.4, 0.4, -1, 20, "HitPuff", FBF_NORANDOM,8192,"decorativetracer",-12)
		RIFL C 0 A_ZoomFactor(0.98)
		RIFL C 0 A_SpawnItemEx("PlayerMuzzle1",30,5,30)
		NULL A 0 A_WeaponOffset(random(-1,1),32+random(0,1) )
		RIFL C 0 A_JumpIfInventory("NoPitch", 1, 2)
		RIFL C 0 A_SetPitch(pitch-0.5, SPF_INTERPOLATE)
		NULL A 0
		RIFL G 1 A_FireCustomMissile("RifleCaseSpawnVersion2",5,0,6,-14)
		RIFL C 0 A_JumpIfInventory("NoPitch", 1, 2)
		RIFL C 0 A_SetPitch(pitch-0.5, SPF_INTERPOLATE)
		RIFL C 0 A_JumpIfInventory("IsNOTTacticalClass", 1, 3)//tactical mode has muzzle climb
		TNT1 A 0 A_SetPitch(Pitch-1, SPF_INTERPOLATE)
		RIFL C 0
		RIFL C 0 A_ZoomFactor(1.0)
		RIFL E 1 
		RIFL C 0 A_JumpIfInventory("NoPitch", 1, 2)
		RIFL C 0 A_SetPitch(pitch+1.0, SPF_INTERPOLATE)
 //       RIFL C 1 A_JumpIfInventory("IsTacticalClass", 1, 1)//Tactical mode skips a frame, fires faster
		RIFL F 1 A_WeaponOffset(0,32)
		//RIFL C 0 A_GiveInventory("GunSmokeCounter",30)
		//RIFL C 0 A_JumpIfInventory("Fire2Activate",1,"AltFire")
		RIFL C 0 A_ReFire
		RIFL C 0 A_JumpIfInventory("FiredPrimary",1,"Fire")
		Goto Ready3
	
     Fire2:
	RIFL C 0 A_CheckIfAmmo("RifleAmmo")
        TNT1 AA 0
		RIFL C 0 A_AlertMonsters
		RIFF A 0 A_FireCustomMissile("DistantFireSoundRifle", random(-1,1), 0, 0, -12, 0, random(-1,1))
		RIFL C 0 A_TakeAmmo("DoubleRifleAmmo",1)
		RIFL C 0 A_TakeAmmo("RifleAmmo",1)
        RIFL C 0 A_PlaySound("weapons/rifle", 1)
		"----" A 0 { If(GetCVAR("BD_MagGoClicky")==1) { if(CountInv("RifleAmmo")<=8) { A_PlaySound("MagClick", 7); }}}
		RIFL C 0 
		//RIFF A 0 A_FireCustomMissile("GunFireSmoke", 0, 0, 0, 0, 0, 0)
		RIFL C 0 A_SpawnItemEx("PlayerMuzzle1",30,0,45)
		RIFL C 0 A_ZoomFactor(1.9)
		RIFZ E 1 BRIGHT A_FireBullets (1, 1, 1, 20, "HitPuff", FBF_NORANDOM,8192,"decorativetracer",-4)
      //  RI2F A 0 BRIGHT A_FireCustomMissile("DecorativeTracer", 0, 0, 0, 0)
	//	RIFL C 0 A_Takeinventory("RifleAmmo",1)
		RIFL C 0 A_ZoomFactor(2.0)
		RIFZ F 1 
		RIFL C 0 A_JumpIfInventory("IsNOTTacticalClass", 1, 3)
		RIFL C 0 A_JumpIfInventory("NoPitch", 1, 2)
		RIFL C 0 A_SetPitch(pitch-1.0, SPF_INTERPOLATE)
		RIFL C 0 A_FireCustomMissile("RifleCaseSpawnVersion2",1,0,8,0)
        RIFZ G 1
		RIFL C 0
		RIFZ H 1
		RIFL C 0
		RIFZ D 1 A_jumpifinventory("firedprimary",1,"Fire2")
		TNT1 A 0 A_weaponZoom2
	
		
		
    AltFire:
        RIFL C 0
		//RIFL C 0 ACS_NamedExecuteAlways("HoldAim")
		RIFL C 0 A_Giveinventory("GoSpecial",1)
		//RIFL C 0 A_JumpIfInventory("Zoomed",1,"NoAim")
		RIFL C 0 A_Giveinventory("Zoomed",1)
        RIFL C 0 A_ZoomFactor(2.0)
		RIFL C 0 A_Giveinventory("ADSmode",1)
		RIFL C 0 A_GiveInventory("ZoomHold",1)
		TNT1 A 0 A_SetCrosshair(41)
		SMGG A 0 A_PlaySound("ADSIN")
        RIFZ ABC 1
		RIFZ D 2
		StillAiming:
		TNT1 A 0 A_WeaponZoom
		Goto Aim2
		Aim1:
			SMGG A 0 A_ZoomFactor(2.0)
			TNT1 A 0 A_jumpifinventory("firedprimary",1,"Fire2")
			RIFZ D 1 A_jumpifinventory("firedprimary",1,"Fire2")
			
			
			TNT1 A 0 A_jumpifinventory("reloading",1,"reload")
			TNT1 A 0 A_jumpifinventory("firedprimary",1,"Fire2")
			TNT1 A 0 A_jumpifinventory("firedsecondary",1,"Aim1")
			Goto noaim
		Aim2:
			SMGG A 0 A_ZoomFactor(2.0)
			TNT1 A 0 A_jumpifinventory("firedprimary",1,"Fire2")
			RIFZ D 1 A_jumpifinventory("firedprimary",1,"Fire2")
			TNT1 A 0 A_jumpifinventory("reloading",1,"reload")
			TNT1 A 0 A_jumpifinventory("firedprimary",1,"Fire2")
			TNT1 A 0 A_jumpifinventory("firedsecondary",1,"NoAim")
			LOOP
		
		
	NoAim:
		RIFL C 0
		RIFL C 0 A_Takeinventory("Zoomed",1)
		RIFL C 0 A_Takeinventory("ZoomHold",1)
        RIFL C 0 A_ZoomFactor(1.0)
		RIFL C 0 A_Takeinventory("ADSmode",1)
		RIFL C 0 A_TakeInventory("Fire2Activate",1)
		RIFL C 0 A_Takeinventory("PressedTwice",1)
		RIFL C 0 A_TakeInventory("PressedOnce",1)
		RIFL C 0 {if(GetCVAR("bd_SmartCrosshairs") == 1){A_SetCrosshair(GetCVAR("RifleCrosshair"));}else{A_SetCrosshair(0);}}
		SMGG A 0 A_PlaySound("ADSOUT")
		RIFZ BA 1
        Goto Ready3
			
		
	NoAmmo:
		RIFL C 0
		RIFL C 0 A_ZoomFactor(1.0)
		RIFL C 0 {if(GetCVAR("bd_SmartCrosshairs") == 1){A_SetCrosshair(GetCVAR("RifleCrosshair"));}else{A_SetCrosshair(0);}}
		RIFL C 0 A_Takeinventory("Zoomed",1)
		RIFL C 0 A_Takeinventory("ADSmode",1)
		RIFL C 0 A_JumpIfInventory("TurboReload",1,"TurboReload")
		TNT1 A 0 A_PlaySound("weapons/empty", 4)
		NoAmmo2:
		RIFL C 0 A_JumpIfInventory("TossGrenade",1,"TossGrenade")
	    RIFL C 0 A_JumpIfInventory("Taunting",1,"Taunt")
		RIFL C 0 A_JumpIfInventory("Salute1", 1, "Salute")
		RIFL C 0 A_JumpIfInventory("Salute2", 1, "Salute")
		RIFL C 0 A_JumpIfInventory("IsRunning",1,"CheckSprint")
		RIFL C 0 A_JumpIfInventory("ExecuteDownedEnemy", 1, "DoExecution")
		RIFL C 0  
		RIFL C 4 A_WeaponReady(WRF_ALLOWRELOAD | WRF_NOFIRE)
		RIFL C 0 A_JumpIfInventory("Reloading",1,"Reload")
		RIFL C 0 A_JumpIfInventory("TurboReload",1,"TurboReload")
		TNT1 A 0 A_JumpIf(GetCvar("bd_NoAutoReload")==1, "Ready3")
		RIFL C 0 A_JumpIfInventory("Clip2",1,"Reload")
		RIFL C 0 A_JumpIfInventory("FiredPrimary",1,"NoAmmo2")
		Goto Ready3
	
    Reload:
	    RIFL C 0 A_Takeinventory("Reloading",1)
	    RIFL C 0 A_JumpIfInventory("RifleAmmo",31,"Fidget")
	//	RIFL C 1 A_WeaponReady
		RIFL C 0 {if(GetCVAR("bd_SmartCrosshairs") == 1){A_SetCrosshair(GetCVAR("RifleCrosshair"));}else{A_SetCrosshair(0);}}
		RIFL C 0 A_TakeInventory("RifleSpread", 10)
		RIFL C 0 A_JumpIfInventory("TurboReload",1,"TurboReload")
		RIFL C 0 A_ZoomFactor(1.0)
		RIFL C 0 A_Takeinventory("Reloading",1)
		RIFL C 0 A_Takeinventory("ADSmode",1)
		RIFL C 0 A_Takeinventory("Zoomed",1)
		RIFL C 0 A_JumpIfInventory("RifleAmmo",31,76)
		//RIFL C 0 A_JumpIfInventory("TurboReload",1,"TurboReload")
        RIFL C 0 A_JumpIfInventory("Clip2",1,3)
        Goto FinishReloading
        TNT1 AAA 0
		RIFL C 0 A_Takeinventory("Zoomed",1)
        RIFL C 0 A_PlaySound("Relo1", 6)
		RIFL C 0 A_GiveInventory ("Pumping", 1)
		RIFL C 0 A_Takeinventory("Reloading",1)
		RIFL C 0 A_JumpIfInventory("TurboReload",1,"TurboReload")
		//XXXX X 0 A_PlaySound("RIFFOL3",10)
        RIFR AB 1   
		RIFL C 0 A_JumpIfInventory("HasUnloaded", 1, 2)
        RIFR F 0 A_FireCustomMissile("EmptyClipSpawn",-5,0,8,-4)
		RIFR CDEFF 1 
        RIFR GG 1 offset(0,32)
		RIFR HIKLMNN 1
		RIFR OP 1
		RIFR Q 3
		RIFR R 1
		RIFL C 0 A_PlaySound("Relo2", 6)
		RIFR SSTU 1
		NULL A 0 A_JumpIf(CountInv("RifleAmmo")==0,"ReloadEmpty")
		RIFR V 4
		RIFR WXYZ 1
		RIFR "[\]" 1
		RIR2 AB 1
		//RIFR MMMMM 1
		//XXXX X 0 A_PlaySound("RIFFOL3",10)
		//RIFR NOPQRST 1  
		RIFL C 0 A_Takeinventory("HasUnloaded",1)
		RIFL C 0 A_reload("RifleAmmo",30,"Clip2",TRUE)
		Goto FinishReloading
		//RIFL C 0 A_JumpIfInventory("RifleAmmo",1,"InsertBullets2")//30+1 effect
		//Goto InsertBullets
		
	ReloadEmpty:
		RIFR W 1
		RIR2 CDEGHII 1
		RIR2 J 3
		NULL A 0 A_PlaySound("RIFPULL", 0, 0.6)
		RIR2 LM 1
		RIR2 N 4
		RIR2 OPQ 1
		RIR2 R 3
		RIR2 SSTUV 1
	//	RIFR
		RIFR "\]" 1
		RIR2 AB 1
		RIFL C 0 A_Takeinventory("HasUnloaded",1)
		RIFL C 0 A_reload("RifleAmmo",30,"Clip2",TRUE)
		Goto FinishReloading
		
		
		
	TurboReload:
		RIFL C 0 A_Takeinventory("HasUnloaded",1)
		RIFL C 0 A_JumpIfInventory("Clip2",1,3)
		Goto Ready3
		RIFS ABC 0
        Goto InsertBullets
		
	InsertBullets:
		TNT1 AAAA 0
		RIFL C 0 A_JumpIfInventory("RifleAmmo",30,15)
		RIFL C 0 A_JumpIfInventory("Clip2",1,3)
		Goto FinishReloading
        TNT1 AAAAAA 0
		RIFL C 0 A_Giveinventory("RifleAmmo",1)
		RIFL C 0 A_Giveinventory("DoubleRifleAmmo",1)
		RIFL C 0 A_Takeinventory("Clip2",1)
		Goto InsertBullets
		
		TNT1 AAAAAAAAAA 0
		RIFL C 0 A_Takeinventory("Reloading",1)
		
		RIFL C 0 A_Refire
        Goto FinishReloading
		TNT1 AAAA 0
		RIFL C 0 A_Takeinventory("Reloading",1)
		
		RIFL C 0 A_Refire
        Goto FinishReloading
		
	InsertBullets2:
		TNT1 AAAA 0
		RIFL C 0 A_JumpIfInventory("RifleAmmo",31,15)
		RIFL C 0 A_JumpIfInventory("Clip2",1,3)
		Goto FinishReloading
        TNT1 AAAAAA 0
		RIFL C 0 A_Giveinventory("RifleAmmo",1)
		RIFL C 0 A_Giveinventory("DoubleRifleAmmo",1)
		RIFL C 0 A_Takeinventory("Clip2",1)
		Goto InsertBullets2
		
		TNT1 AAAAAAAAAA 0
		RIFL C 0 A_Takeinventory("Reloading",1)
		RIFL C 0 A_Refire
        Goto FinishReloading
		TNT1 AAAA 0
		RIFL C 0 A_Takeinventory("Reloading",1)
		
		RIFL C 0 A_Refire
        Goto FinishReloading	
		
	FinishReloading:
		RIFL C 0
		RIFL C 0 A_Refire
		Goto Ready3
		
		
		
		
		
		
	Unload:
		RIFL C 0 {if(GetCVAR("bd_SmartCrosshairs") == 1){A_SetCrosshair(GetCVAR("RifleCrosshair"));}else{A_SetCrosshair(0);}}
		RIFL C 0 A_ZoomFactor(1.0)
		RIFL C 0 A_Takeinventory("Unloading",1)
		RIFL C 0 A_Takeinventory("ADSmode",1)
		RIFL C 0 A_Takeinventory("Zoomed",1)
        RIFL C 0 A_JumpIfInventory("RifleAmmo",1,3)
        Goto NoAmmo
        TNT1 AAA 0
		RIFL C 0 A_Takeinventory("Zoomed",1)
		RIR2 BA 1
		RIFR "]\[" 1
		RIFR ZYXWVVV 1
		RIFR UT 1
		NULL A 0 //ChangeAmmoIcon2("RIFLC0")
		RIFL C 0 A_GiveInventory ("Pumping", 1)
		RIFL C 0 A_Takeinventory("Unloading",1)
		
	RemoveBullets:
		TNT1 AAAA 0
		RIFL C 0 A_JumpIfInventory("RifleAmmo",1,3)
		Goto FinishUnload
        TNT1 AAAAAA 0
		RIFL C 0 A_Takeinventory("RifleAmmo",1)
		RIFL C 0 A_Takeinventory("DoubleRifleAmmo",1)
		RIFL C 0 A_Giveinventory("Clip2",1)
		Goto RemoveBullets
	
	FInishUnload:
		//RIFR NM 1
		RIFL C 0 A_PlaySound("RELO1")
		//RIFR LKIGHGFEDCBA 1
		RIFR ROO 1
		RIFR N 3
		RIFR MMLKJIHGGG 1
		RIFR FFEDCBA 1
	//	RIFL C 0 A_PlaySound("DryFire")
		RIFL C 0 A_GiveInventory("HasUnloaded", 1)
		RIFL C 0 A_Takeinventory("Unloading",1)
		Goto Ready3
		
		
		
 	Spawn:
		RIFL A -1
		Stop
		
	DualWield:
		RIFL C 1
		RIFL C 0 A_Takeinventory("StartDualWield",1)
		//TNT1 A 0 A_JumpIfInventory("UseBashInstead",1,"Bash")
		//RIFL C 0 A_JumpIfInventory("IsTacticalClass", 1, "NoDual")//Tactical mode cant dual
		RIFL C 0 A_JumpIfInventory("DualRifles", 1, "GetDual")
		RIFL C 0 A_Print("You must have two rifles to dual wield!",2)
		Goto Ready
	
	NoDual:
		RIFL C 1
		TNT1 A 0 A_Print("You can't dual wield in Tactical Mode.",2)
		Goto Ready
		
	 GetDual:	
		RIFL C 0 A_Takeinventory("Zoomed",1)
		RIFL C 0 A_Takeinventory("ADSmode",1)
		RIFL C 0 A_TakeInventory("TossGrenade", 1)
		RIFL C 0 A_TakeInventory("Kicking",1)
        RIFL C 0 A_TakeInventory("Taunting",1)
        RIFL C 0 A_TakeInventory("Reloading",1)
		RIFL C 0 A_TakeInventory("Unloading",1)
		RIFL C 0 A_TakeInventory("Salute1", 1)
		RIFL C 0 A_TakeInventory("Salute2", 1)
		TNT1 A 0 A_GiveInventory("SwitchingDualModes", 1)
		TNT1 A 0 A_GiveInventory("RememberDualRifle", 1)
        RIFL C 0 A_ZoomFactor(1.0)
		RIFL C 0 A_SelectWEapon("DualRifles")
		Goto Ready
		
		
		
	Execution2:
		RIFL C 0
		RIFL C 0 A_ZoomFactor(1.1)
		TNT1 A 0 A_Jump(100,"Execution2Taunt")
		TNT1 A 0
	{
	if (CountInv("PowerGreenBloodOnVisor") == 1) {A_GiveInventory("RifleStainedGreen",1); A_TakeInventory("RifleStainedBlue",1); A_TakeInventory("RifleStainedRed",1);}
	if (CountInv("PowerBlueBloodOnVisor") == 1) {A_TakeInventory("RifleStainedGreen",1); A_GiveInventory("RifleStainedBlue",1);	A_TakeInventory("RifleStainedRed",1);}
	if (CountInv("PowerBloodOnVisor") == 1) {A_TakeInventory("RifleStainedGreen",1); A_TakeInventory("RifleStainedBlue",1);	A_GiveInventory("RifleStainedRed",1);}
	}
	3IBB A 0 A_JumpIfInventory("RifleStainedGreen",1,4)
	2IBB A 0 A_JumpIfInventory("RifleStainedBlue",1,3)
	1IBB A 0 A_JumpIfInventory("RifleStainedRed",1,2)
	RIBB N 0
	"####" A 0
		"####" A 1 A_Stop
        "####" B 1 A_PlaySound("skeleton/swing")
		"####" C 1 A_FireCustomMissile("ExecutionAttackMelee", 0, 0, 0, 0)	
		RIBB E 1 { A_GiveInventory("RifleStainedRed",1); A_TakeInventory("RifleStainedBlue",1); A_TakeInventory("RifleStainedGreen",1); }
		RIBB F 5 A_Stop
		RIBB GHIJKL 1 A_Stop //6
		
		RIBB L 1 A_Stop
        RIBB J 1 A_PlaySound("skeleton/swing")
		RIBB H 1 A_FireCustomMissile("ExecutionAttackMelee", 0, 0, 0, 0)
		RIBB E 1
		RIBB F 5 A_Stop
		RIBB GHIJKL 1 A_Stop //6
				
		RIBB L 1 A_Stop
        RIBB J 1 A_PlaySound("skeleton/swing")
		RIBB H 1 A_FireCustomMissile("ExecutionAttackKick", 0, 0, 0, 0)
		RIBB M 1
		RIBB N 9 A_Stop
		
	FinishRifleExecution:
		RIFL C 0 A_ZoomFactor(1.0)
		TNT1 A 0
		RIBB N 1 Offset(0,42)
		TNT1 A 0 A_SetPitch(Pitch-10, SPF_INTERPOLATE)
		RIBB N 1 Offset(2,64)
		TNT1 A 0 A_SetPitch(Pitch-10, SPF_INTERPOLATE)
		RIBB N 1 Offset(4,86)
		TNT1 A 0 A_SetPitch(Pitch-10, SPF_INTERPOLATE)
		RIBB N 1 Offset(6,108)
		TNT1 A 0 A_SetPitch(Pitch-10, SPF_INTERPOLATE)
		RIBB N 1 Offset(8,130)
		TNT1 A 0 A_SetPitch(Pitch-10, SPF_INTERPOLATE)
		RIBB N 1 Offset(10,152)
		TNT1 A 0 A_SetPitch(Pitch-10, SPF_INTERPOLATE)
		RIBB N 1 
		TNT1 A 0 A_SetPitch(Pitch-10, SPF_INTERPOLATE)
		TNT1 A 0 Offset(0,32)
		TNT1 A 0 A_ChangeFLag("NOPAIN", 0)
		TNT1 A 0 A_ChangeFLag("PUSHABLE", 1)
	//	TNT1 A 0 A_Overlay(-2, "KickCheck")
		TNT1 A 0 SetPlayerProperty(0,0,4)
		KICK A 0 A_Takeinventory("ExecuteDownedEnemy",1)
		TNT1 A 0 A_takeInventory("PressedUSe", 1)
		
		// 1st person legs shit
		TNT1 A 0 A_JumpIf(GetCvar("bd_Legs")==1, 3)
		TNT1 A 0 A_Overlay(-10,"FirstPersonLegsStand")
		TNT1 A 0 A_OverlayFlags(-10, PSPF_ADDWEAPON, False)
		//
		Goto Ready3
		
	Execution2Taunt:
	    6UCK A 0 A_JumpIfInventory("PowerGreenBloodOnVisor",1,4)
		5UCK A 0 A_JumpIfInventory("PowerBlueBloodOnVisor",1,3)
		4UCK A 0 A_JumpIfInventory("PowerBloodOnVisor",1,2)
		FUCK N 0
		"####" A 0
		"####" ABCDE 1
		"####" A 0 A_JumpIfInventory("GenderFemale", 1, "TauntFemaleExecution4")
		"####" A 0 A_Jump(256, "FuckYourselfExecution4", "FhaccYoselfExecution4", "GoFuckYourselfExecution4", "GetOffScumExecution4")
	FuckYourselfExecution4:
		"####" A 0 ACS_NamedExecute("InsultFuckYourself",0,0)
        "####" B 0 A_PlaySound("FUCK1", 2)
		Goto ContinueExecution4
	FhaccYoselfExecution4:
		"####" A 0 ACS_NamedExecute("InsultFhaccYoself",0,0)
        "####" B 0 A_PlaySound("FUCK3", 2)
		Goto ContinueExecution4
	GoFuckYourselfExecution4:
		"####" A 0 ACS_NamedExecute("InsultGoFuckYourself",0,0)
        "####" B 0 A_PlaySound("FUCK4", 2)
		Goto ContinueExecution4
	GetOffScumExecution4:
		"####" A 0 ACS_NamedExecute("InsultGetOffScum",0,0)
        "####" B 0 A_PlaySound("FUCK2", 2)
		Goto ContinueExecution4
	TauntFemaleExecution4:
		"####" B 0 A_PlaySound("FTAUNT", 2)
	ContinueExecution4:	
	    "####" F 15
		"####" A 0 BRIGHT A_FireCustomMissile("Taunter", 0, 0, -1, 0)
		"####" EDCBA 1
		TNT1 A 2
	    TNT1 A 0
	{
	if (CountInv("PowerGreenBloodOnVisor") == 1) {A_GiveInventory("RifleStainedGreen",1); A_TakeInventory("RifleStainedBlue",1); A_TakeInventory("RifleStainedRed",1);}
	if (CountInv("PowerBlueBloodOnVisor") == 1) {A_TakeInventory("RifleStainedGreen",1); A_GiveInventory("RifleStainedBlue",1);	A_TakeInventory("RifleStainedRed",1);}
	if (CountInv("PowerBloodOnVisor") == 1) {A_TakeInventory("RifleStainedGreen",1); A_TakeInventory("RifleStainedBlue",1);	A_GiveInventory("RifleStainedRed",1);}
	}
	3IBB A 0 A_JumpIfInventory("RifleStainedGreen",1,4)
	2IBB A 0 A_JumpIfInventory("RifleStainedBlue",1,3)
	1IBB A 0 A_JumpIfInventory("RifleStainedRed",1,2)
	RIBB N 0
	"####" A 0
		"####" A 1 A_Stop
        "####" B 1 A_PlaySound("skeleton/swing")
		"####" C 1 A_FireCustomMissile("ExecutionAttackKick", 0, 0, 0, 0)	
		RIBB E 1 { A_GiveInventory("RifleStainedRed",1); A_TakeInventory("RifleStainedBlue",1); A_TakeInventory("RifleStainedGreen",1); }
		RIBB N 9 A_Stop
		//RIBB OPQRS 1 A_Stop
	    Goto FinishRifleExecution
		
    Bash: //attacks in melee.txt
	//Taunt: 
	RIB2 A 1
	RIB2 B 1
	{
	if (CountInv("PowerGreenBloodOnVisor") == 1) {A_GiveInventory("RifleStainedGreen",1); A_TakeInventory("RifleStainedBlue",1); A_TakeInventory("RifleStainedRed",1);}
	if (CountInv("PowerBlueBloodOnVisor") == 1) {A_TakeInventory("RifleStainedGreen",1); A_GiveInventory("RifleStainedBlue",1);	A_TakeInventory("RifleStainedRed",1);}
	if (CountInv("PowerBloodOnVisor") == 1) {A_TakeInventory("RifleStainedGreen",1); A_TakeInventory("RifleStainedBlue",1);	A_GiveInventory("RifleStainedRed",1);}
	}
	TNT1 A 0
	TNT1 A 0 A_PlaySound("fstatk", 1)
	3IBB A 0 A_JumpIfInventory("RifleStainedGreen",1,4)
	2IBB A 0 A_JumpIfInventory("RifleStainedBlue",1,3)
	1IBB A 0 A_JumpIfInventory("RifleStainedRed",1,2)
	RIBB N 0
	"####" A 0
	"####" BCD 1
	"####" A 0 A_FireCustomMissile("MeleeAttackRifleBash", 0, 0, 0, -2)
	"####" TUUVWXYZ 1
	RIB2 B 1
	RIB2 A 1
	TNT1 A 0 A_Takeinventory("StartDualWield",1)
	RIFL C 0 A_TakeInventory("Taunting",1)
	Goto Ready
	PowerBash:
	"####" A 0 A_PlaySound("weapons/gswing")
	"####" BCD 1
	"####" A 0 A_FireCustomMissile("StrongRifleBash", 0, 0, 0, -2)
	"####" TUUVWXYZ 1
	RIB2 B 1
	RIB2 A 1
	TNT1 A 0 A_Takeinventory("StartDualWield",1)
	RIFL C 0 A_TakeInventory("Taunting",1)
	Goto Ready
	
	specialaction:
	"####" A 0 A_TakeInventory("swapRifleSpecial",1)
	Goto Bash
	ReturnToDualWield:
	"####" A 0 A_TakeInventory("UseBashInstead",1)
	"####" A 0 A_TakeInventory("swapRifleSpecial",1)
	"####" A 0 A_Print("Dual wielding selected",1)
	Goto Ready
	
	}
}

Actor Zoomed : Inventory
{
inventory.maxamount 1
}
ACTOR RifleAmmo : Ammo
{
   Inventory.Amount 0
   Inventory.MaxAmount 31
   Ammo.BackpackAmount 0
   Ammo.BackpackMaxAmount 31
   Inventory.Icon "RIFLA0"
}

ACTOR MeatshieldGunAmmo : Ammo
{
   Inventory.Amount 0
   Inventory.MaxAmount 30
   Ammo.BackpackAmount 0
   Ammo.BackpackMaxAmount 30
}

ACTOR MeatAmmo : Ammo
{
   Inventory.Amount 0
   Inventory.MaxAmount 100
   Ammo.BackpackAmount 0
   Ammo.BackpackMaxAmount 100
}

ACTOR swapRifleSpecial : Inventory {Inventory.MaxAmount 1}
ACTOR UseBashInstead : Inventory {Inventory.MaxAmount 1}

ACTOR RifleStainedGreen : Inventory {Inventory.MaxAmount 1}
ACTOR RifleStainedBlue : Inventory {Inventory.MaxAmount 1}
ACTOR RifleStainedRed : Inventory {Inventory.MaxAmount 1}
